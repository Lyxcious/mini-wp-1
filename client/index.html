<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <title>Client Side</title>
    <!-- Bootstrap Vue -->
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap/dist/css/bootstrap.min.css" />
    <link type="text/css" rel="stylesheet" href="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css" />
    <!-- Google Sign In -->
    <script src="https://apis.google.com/js/platform.js"></script>
    <meta name="google-signin-client_id" content="601985090513-h9v7e5bhnotafuifg59a3c1vf90gqrub.apps.googleusercontent.com">
    <!-- Axios -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- Fontawesome -->
    <script src="https://kit.fontawesome.com/cab1ba56dd.js"></script>
    <!-- TinyMCE -->
    <script src="https://cdn.tiny.cloud/1/ttnxhb3ywq275o91us1gzu498zfvz2ahfbk6c5o3kq3uc6ld/tinymce/5/tinymce.min.js"></script> 
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      html {
        position: relative;
        height: 100%;
      }
      body {
        height: 100%;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      }
      #app {
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
      }
      .nav {
        min-width: 1000px;
        max-width: 1500px;
      }
      .nav-size{
        width: 30%;
      }
      .container{
        max-width: 100%;
        margin: 15px 0;
        height: 700px;
      }
      .form-user {
        width: 30%;
        border-color: grey;
        border-width: 2px !important;
        -webkit-box-shadow: 10px 10px 11px -3px rgba(107,107,107,1);
        -moz-box-shadow: 10px 10px 11px -3px rgba(107,107,107,1);
        box-shadow: 10px 10px 11px -3px rgba(107,107,107,1);
      }
      .form-article {
        width: 50%;
      }
      #filter {
        width: 50%;
      }
      .center {
        margin: 0px auto;
      }
      .logged-in {
        display: none;
      }
      #user {
        color: black;
      }
      .menu a {
        font-size: 20px;
        color: black;
      }
      .menu-active {
        background-color: rgba(202, 202, 202, 0.596);
      }
      .menu-active a {
        color: #006bc3;
      }
      .menu:hover > a {
        text-decoration: none;
        opacity: 0.6;
      }
      .menu:hover {
        cursor: pointer;
      }
      .disabled:hover > a {
        cursor: default;
        opacity: 1;
      }
      .disabled a:hover {
        text-decoration: none;
        opacity: 1;
        cursor: default;
      }
      .disabled:hover {
        cursor: default;
      }
      hr {
        border-width: 3px;
        border-color: rgb(73, 73, 73); 
      }
      .quote {
          background-color:black;
          border: black 1px solid;
          color: white;
          width: 100%;
          height: 100%;
          text-align: center;
          padding-top: 15px;
      }
    </style>
  </head>

<body>
  <div id="app">
    <nav class="navbar navbar-expand navbar-light justify-content-between border" style="min-height: 50px; max-height: 60px; background-color: #c1e2fa;">
        <div class="nav-size">
          <a class="navbar-item" href="#">
            <img src="https://s.w.org/style/images/about/WordPress-logotype-wmark.png" width="40" height="40" alt="logo">
          </a>
        </div>
        <div class="nav-size d-flex justify-content-center">
            <h1>My Wordpress</h1>
        </div>
        <div class="nav-size d-flex justify-content-end">
          <div>
            <ul class="navbar-nav mr-auto">
              <li class="nav-item">
                  <a class="nav-link register-button" href="#" @click="rendRegister" v-show="isLogin == false">Register</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link login-button" href="#" @click="rendLogin" v-show="isLogin == false">Login</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" id="user" v-show="isLogin == true">{{user.name}}</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link" href="#" id="logoff" @click="signOut()" v-show="isLogin == true">Logout</a>
              </li>
            </ul>
          </div>
        </div>
    </nav>
  
    <div class="container register" v-show="page == 'register'">
      <h2 class="text-center">Register Form</h2>
      <form class="form-user center border border-secondary p-3 rounded" @submit.prevent="register">
        <div class="form-group">
          <label>Name</label>
          <input type="text" class="form-control" v-model="newUser.name" placeholder="Enter name" required>
        </div>
        <div class="form-group">
          <label>Email address</label>
          <input type="email" class="form-control" v-model="newUser.email" aria-describedby="emailHelp" placeholder="Enter email" required>
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" class="form-control" v-model="newUser.password" placeholder="Password" required>
        </div>
        <div class="form-group">
          <p>Already have an account? <a href="#" class="login-button" @click="rendLogin">Login Here</a></p>
        </div>
        <div class="col text-center">
          <button type="submit" class="btn btn-primary center">Submit</button>
        </div>
      </form>
      <br>
    </div>
  
    <div class="container login" v-show="page == 'login'">
        <h2 class="text-center">Login Form</h2>
        <form class="form-user center p-3 border border-secondary rounded" id="login-form" @submit.prevent="login">
          <div class="form-group">
            <label>Email address</label>
            <input type="email" class="form-control" v-model="user.email" aria-describedby="emailHelp" placeholder="Enter email" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" class="form-control" v-model="user.password" placeholder="Password" required>
          </div>
          <div class="form-group">
            <p>Don't have an account? <a href="#" class="register-button" @click="rendRegister">Register Here</a></p>
          </div>
          <!-- <p>Or login with:</p>
          <div class="row justify-content-center">
              <div class="col-auto">
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
              </div>
          </div> -->
          <div class="col text-center">
            <br>
            <button type="submit" class="btn btn-primary center">Submit</button>
          </div>
        </form>
        <br>
      </div>
  
    <div class="container home" v-show="page == 'home'">
      <div class="row" style="height: 100%">
        <div class="col-2 p-0" style="border-right-width: 3px; border-right-color: rgba(202, 202, 202, 0.596); border-right-style: solid">
          <h3 class="pl-3 pr-3">Menu bar</h3>
          <div class="pl-3 pr-3">
          <hr/>
          </div>
          <div id="menu-bar">
            <div class="menu pl-3 pr-3 pt-2 pb-2" @click="rendAdd" v-bind:class="{'menu-active':(menu == 'add')}">
              <a href="#" class="menu"><i class="fas fa-feather-alt"></i> Add Article</a>
            </div>
            <div class="menu pl-3 pr-3 pt-2 pb-2" @click="rendList" v-bind:class="{'menu-active':(menu == 'list')}">
              <a href="#" class="menu"><i class="fas fa-bars"></i> List Article</a>
            </div>
            <div class="menu pl-3 pr-3 pt-2 pb-2 disabled" v-bind:class="{'menu-active':(menu == 'edit')}">
              <a href="#" class="menu"><i class="fas fa-edit"></i> Edit Article</a>
            </div>
            <div class="menu pl-3 pr-3 pt-2 pb-2 disabled" v-bind:class="{'menu-active':(menu == 'detail')}">
              <a href="#" class="menu"><i class="fas fa-info-circle"></i> Article Detail</a>
            </div>
          </div>
        </div>

        <div class="col" id="content">
          <div v-show="menu == 'add'">
            <div class="center d-flex justify-content-center">
              <h2>Article Form</h2>
            </div>
            <div class="center" style="width: 50%">
              <hr>
            </div>
            <form class="form-article center" @submit.prevent="addArticle">
                <div class="form-group">
                  <label >Title</label>
                  <input type="text" class="form-control" v-model="article.title" placeholder="Enter Article Title" required>
                </div>
                <div class="form-group">
                  <label >Content</label>
                  <editor api-key="ttnxhb3ywq275o91us1gzu498zfvz2ahfbk6c5o3kq3uc6ld " :init="{plugins: 'wordcount'}" v-model="article.content"></editor>
                </div>
                <div class="col text-center">
                  <button type="submit" class="btn btn-primary center">Submit</button>
                </div>
            </form>
          </div>

          <div v-show="menu == 'edit'">
              <div class="center d-flex justify-content-center">
                <h2>Edit Article Form</h2>
              </div>
              <div class="center" style="width: 50%">
                <hr>
              </div>
              <form class="form-article center" @submit.prevent="updateArticle">
                  <div class="form-group">
                    <label >Title</label>
                    <input type="text" class="form-control" v-model="article.title" placeholder="Enter Article Title" required>
                  </div>
                  <div class="form-group">
                    <label >Content</label>
                    <editor api-key="ttnxhb3ywq275o91us1gzu498zfvz2ahfbk6c5o3kq3uc6ld " :init="{plugins: 'wordcount'}" v-model="article.content"></editor>
                  </div>
                  <div class="col text-center">
                    <button type="submit" class="btn btn-primary center">Submit</button>
                  </div>
              </form>
            </div>

          <div v-show="menu == 'list'" style="height: 700px">
              <div class="center d-flex flex-column justify-content-center">
                <h2 class="center">List Article</h2>
                <form id="filter" class='center align-middle' @submit.prevent="getFilter">
                    <div class="row">
                        <div class="col">
                          <div class="input-group input-group-md">
                            <input type="text" name="filter" v-model="filter" class="form-control form-control-md input-md" placeholder="Filter By Article Title">
                            <span class="input-group-append">
                              <button class="btn btn-success btn-md" type="submit">Search</button>
                            </span>
                          </div>
                        </div>
                    </div>
                    <div class="row"  style="margin-top: 15px">
                      <div class="col">
                        <div class="input-group input-group-md d-flex justify-content-center">
                          <button class="btn btn-success btn-md" type="button" @click="getAll">Get All Article</button>
                        </div>
                      </div>
                  </div>
                  </form>
              </div>
              <div class="center" style="width: 90%">
                <hr>
              </div>
              <div class="center align-items-center d-flex flex-column" id="article-list" style="overflow: scroll; height: 500px">
                <div class="card mb-3 article" style="width: 70vw;" v-for="article in articles">
                    <div class="row no-gutters">
                      <div class="col">
                        <div class="card-body">
                          <h5 class="card-title">{{article.title}}</h5>
                          <!-- <p class="card-text" v-html="article.content"></p> -->
                          <p class="card-text">Created at: {{convertDate(article.created_at)}}</p>
                          <a href="#" @click="getDetail(article._id)">See Detail</a>
                        </div>
                      </div>
                    </div>
                </div>
              </div>
              <div class="d-flex justify-content-center">
                <div style="width: 42.5%">
                  <hr>
                </div>
                <div style="width: 5%" class="d-flex justify-content-center">
                  <img src="https://s.w.org/style/images/about/WordPress-logotype-wmark.png" width="40" height="40" alt="logo">
                </div>
                <div  style="width: 42.5%">
                  <hr>
                </div>
              </div>
          </div>

          <div v-show="menu == 'detail'" style="height: 700px">
            <div class="center align-items-center d-flex flex-column" id="article-list" style="height: 100%">
              <div class="card article" style="width: 70vw; height: 100%">
                  <div class="row no-gutters d-flex flex-column justify-content-between" style="height: 100%">
                      <div class="card-body d-flex flex-column justify-content-between" >
                        <div class="row d-flex flex-column p-3" >
                          <h5 class="card-title center">{{article.title}}</h5>
                          <div class="center" style="width: 100%">
                              <hr>
                            </div>
                          <div class="d-flex flex-column justify-content-between" style="height: 500px">
                            <div class="card-text" v-html="article.content"></div>
                            <p class="card-text">Created at: {{convertDate(article.created_at)}}</p>
                          </div>
                        </div>
                        <div class="row d-flex justify-content-end">
                          <div class="center pr-3 pl-3" style="width: 100%">
                            <hr>
                          </div>
                          <div class="pr-3">
                            <button class="btn btn-success" @click="rendEdit">Edit</button>
                            <button class="btn btn-danger" @click="deleteArticle">Delete</button>
                          </div>
                        </div>
                    </div>
                  </div>
              </div>
            </div>
        </div>
        </div>
      </div>
  
      <b-modal id="notif-modal" hide-footer title="Notification">
        <div class="alert alert-success" role="alert" v-if="notifStat == true">
          {{message}}
        </div>
        <div class="alert alert-warning" role="alert" v-else>
          {{message}}
        </div>
        <div class="d-flex justify-content-end">
          <b-button @click="$bvModal.hide('notif-modal')">Close</b-button>
        </div>
      </b-modal>
    </div>
  
    <footer>
        <div class="quote">
            <p>~ Learn something new everyday without limits ~</p>
        </div>
    </footer>
  </div>
</body>
<!-- Vue -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!-- Bootstrap Vue -->
<script src="//polyfill.io/v3/polyfill.min.js?features=es2015%2CMutationObserver" crossorigin="anonymous"></script>
<script src="//unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
<!-- TinyMCE -->
<script src="/tinymce-vue.min.js"></script>
<!-- Vue Script -->
<script src="./vue.js"></script>
</html>